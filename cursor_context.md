# üéØ –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞ Lunch Bot

## üìù –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**Lunch Bot** ‚Äî —ç—Ç–æ Telegram-–±–æ—Ç –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –æ–±–µ–¥–æ–≤ —Å —Å–∏—Å—Ç–µ–º–æ–π –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã.

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- üó≥Ô∏è –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã –Ω–∞ –æ–±–µ–¥
- üìã –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ–Ω—é —Å —Ü–µ–Ω–∞–º–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- ‚úÖ –ó–∞–ø–∏—Å—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –Ω–∞ –æ–±–µ–¥
- üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üîî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∑–∞ 30 –º–∏–Ω –∏ –≤ –≤—Ä–µ–º—è –æ–±–µ–¥–∞)
- üëë –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞–º–∏ –∏ –º–µ–Ω—é

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Python 3.7+**
- **python-telegram-bot 20.7** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è Telegram Bot API
- **SQLite** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Ñ–∞–π–ª `lunch_bot.db`)
- **APScheduler 3.10.4** - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **python-dotenv** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ `.env`

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏:

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ |
|------|-----------|------------|
| `main.py` | –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ | ~193 |
| `config.py` | –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ `.env` | ~17 |
| `database.py` | –†–∞–±–æ—Ç–∞ —Å SQLite –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö | ~557 |
| `handlers.py` | –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | ~492 |
| `admin_handlers.py` | –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ | ~416 |
| `scheduler.py` | –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π | ~205 |

**–í—Å–µ–≥–æ: ~1,675 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞**

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `requirements.txt` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
- `.env` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—Å—è!)
- `.env.example` - —à–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `lunch_bot.db` - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
- `bot.log` - –ª–æ–≥-—Ñ–∞–π–ª
- `control.sh`, `start.sh`, `START_HERE.sh`, `test_bot.sh` - —Å–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- `README.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `PROJECT_INFO.md` - –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `STRUCTURE.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- `QUICKSTART.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `COMMANDS.md` - —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
- `TESTING.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- `DEPLOY.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é
- `–ü–†–û–°–¢–ê–Ø_–ò–ù–°–¢–†–£–ö–¶–ò–Ø.txt` - –ø—Ä–æ—Å—Ç–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º

---

## üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite)

### –¢–∞–±–ª–∏—Ü—ã:

1. **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ—Ç–∞
   - `user_id` (PK) - Telegram ID
   - `username`, `first_name`, `last_name`
   - `is_admin` - —Ñ–ª–∞–≥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
   - `created_at`

2. **restaurants** - —Å–ø–∏—Å–æ–∫ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
   - `id` (PK)
   - `name`, `description`, `address`, `phone`
   - `is_active` - –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω
   - `created_at`

3. **menu_items** - –º–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
   - `id` (PK)
   - `restaurant_id` (FK) ‚Üí restaurants
   - `name`, `description`, `price`, `category`
   - `is_available`
   - `created_at`

4. **polls** - –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
   - `id` (PK)
   - `created_by` (FK) ‚Üí users
   - `date` - –¥–∞—Ç–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
   - `status` - active/closed
   - `winner_restaurant_id` (FK) ‚Üí restaurants
   - `created_at`, `closed_at`

5. **votes** - –≥–æ–ª–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `id` (PK)
   - `poll_id` (FK) ‚Üí polls
   - `user_id` (FK) ‚Üí users
   - `restaurant_id` (FK) ‚Üí restaurants
   - UNIQUE(poll_id, user_id) - –æ–¥–∏–Ω –≥–æ–ª–æ—Å –Ω–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ

6. **lunch_participants** - —É—á–∞—Å—Ç–Ω–∏–∫–∏ –æ–±–µ–¥–∞
   - `id` (PK)
   - `poll_id` (FK) ‚Üí polls
   - `user_id` (FK) ‚Üí users
   - UNIQUE(poll_id, user_id) - –æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å –Ω–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ

---

## üîë –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### 1. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å
–í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `async/await`. –ü—Ä–∏–º–µ—Ä:
```python
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text("–ü—Ä–∏–≤–µ—Ç!")
```

### 2. ConversationHandler
–î–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞/–º–µ–Ω—é):
- –°–æ—Å—Ç–æ—è–Ω–∏—è: `NAME`, `DESC`, `ADDRESS`, `PHONE`
- –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- –ö–æ–º–∞–Ω–¥–∞ `/skip` –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- –ö–æ–º–∞–Ω–¥–∞ `/cancel` –¥–ª—è –æ—Ç–º–µ–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–∏

### 3. InlineKeyboard
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:
```python
keyboard = [[InlineKeyboardButton("üçï –ü–∏—Ü—Ü–µ—Ä–∏—è", callback_data="vote_1")]]
reply_markup = InlineKeyboardMarkup(keyboard)
```

### 4. Callback Queries
–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ inline-–∫–Ω–æ–ø–∫–∏:
```python
async def vote_callback(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()  # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞–∂–∞—Ç–∏—è
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ callback_data
```

### 5. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (APScheduler)
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
- **11:30** - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–∏ (–∑–∞ 30 –º–∏–Ω)
- **12:00** - –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–≤ –≤—Ä–µ–º—è –æ–±–µ–¥–∞)

### 6. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
```python
def admin_only(func):
    async def wrapper(update: Update, context: ContextTypes.DEFAULT_TYPE):
        user_id = update.effective_user.id
        if not db.is_admin(user_id):
            await update.message.reply_text("‚õî –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º.")
            return
        return await func(update, context)
    return wrapper
```

---

## üéÆ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- `/start` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `/help` - —Å–ø—Ä–∞–≤–∫–∞
- `/lunch` - –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω
- `/menu` - –ø—Ä–æ—Å–º–æ—Ç—Ä –º–µ–Ω—é
- `/join` - –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–±–µ–¥
- `/participants` - —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- `/results` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
- `/cancel` - –æ—Ç–º–µ–Ω–∏—Ç—å —É—á–∞—Å—Ç–∏–µ

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
- `/admin` - –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `/add_restaurant` - –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ—Å—Ç–æ—Ä–∞–Ω (ConversationHandler)
- `/list_restaurants` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
- `/add_menu` - –¥–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–æ –≤ –º–µ–Ω—é (ConversationHandler)

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env)

```env
BOT_TOKEN=123456789:ABCdefGHI...  # –¢–æ–∫–µ–Ω –æ—Ç @BotFather
ADMIN_ID=123456789                 # Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
LUNCH_TIME=12:00                   # –í—Ä–µ–º—è –æ–±–µ–¥–∞
TIMEZONE=Europe/Moscow             # –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
```

---

## üîÑ –¢–∏–ø–∏—á–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

1. **10:00** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç `/lunch`, —Å–æ–∑–¥–∞–µ—Ç—Å—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
2. **10:00-11:30** - –ö–æ–ª–ª–µ–≥–∏ –≥–æ–ª–æ—Å—É—é—Ç –∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ –æ–±–µ–¥
3. **11:30** - –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
4. **12:00** - –ë–æ—Ç –ø–æ–¥–≤–æ–¥–∏—Ç –∏—Ç–æ–≥–∏, –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ, –æ–±—ä—è–≤–ª—è–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
5. **12:00** - –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# 1. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
pip install -r requirements.txt

# 3. –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω)
cp .env.example .env
nano .env

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
python main.py
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:
```bash
./start.sh
```

---

## üìä –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Database.py
- –ö–ª–∞—Å—Å `Database` —Å –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ë–î
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π)
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

### Handlers.py
- –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `context.user_data` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Inline-–∫–Ω–æ–ø–∫–∏ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### Admin_handlers.py
- –î–µ–∫–æ—Ä–∞—Ç–æ—Ä `@admin_only` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
- ConversationHandler –¥–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (`/skip`)
- –û—Ç–º–µ–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–æ–π `/cancel`

### Scheduler.py
- –ö–ª–∞—Å—Å `LunchScheduler` —Å –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- CronTrigger –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Ä–µ–º–µ–Ω–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è

---

## üêõ –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π async/await** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
2. **–ü—Ä–æ–≤–µ—Ä—è–π –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞** –ø–µ—Ä–µ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
3. **–ò—Å–ø–æ–ª—å–∑—É–π callback_query.answer()** –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ callback
4. **–õ–æ–≥–∏—Ä—É–π –æ—à–∏–±–∫–∏** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
5. **–ò—Å–ø–æ–ª—å–∑—É–π `context.user_data`** –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
6. **–ù–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ `.env`** - –æ–Ω –≤ `.gitignore`!
7. **SQLite –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π** - –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫
8. **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω**

---

## üìà –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤/–º–µ–Ω—é
- [ ] –ò—Å—Ç–æ—Ä–∏—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [ ] –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –±–ª—é–¥
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Ä—Ç–∞–º–∏ (–º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ)
- [ ] –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –ê–ª–ª–µ—Ä–≥–µ–Ω—ã –∏ –¥–∏–µ—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
- [ ] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã –æ–±–µ–¥–æ–≤
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

---

## üéì –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [python-telegram-bot –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.python-telegram-bot.org/)
- [Telegram Bot API](https://core.telegram.org/bots/api)
- [APScheduler –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://apscheduler.readthedocs.io/)

---

## üöÄ –î–µ–ø–ª–æ–π–º–µ–Ω—Ç –∏ —Å—Ç–∞—Ç—É—Å

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- ‚úÖ **–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ Railway** (–ø—Ä–æ–¥–∞–∫—à–Ω, —Ä–∞–±–æ—Ç–∞–µ—Ç 24/7)
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ git push
- ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∞–∫—Ç–∏–≤–µ–Ω (–≤—Ä–µ–º—è –æ–±–µ–¥–∞: 14:00 MSK)

### –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–µ–ø–ª–æ—è: Railway
- **–•–æ—Å—Ç–∏–Ω–≥:** [Railway.app](https://railway.app/)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `Procfile` + `railway.json`
- **–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞:** `python main.py`
- **Restart policy:** ON_FAILURE (–º–∞–∫—Å–∏–º—É–º 10 –ø–æ–ø—ã—Ç–æ–∫)

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞
```bash
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push
# Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç –±–æ—Ç–∞
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ù–µ–ª—å–∑—è –∑–∞–ø—É—Å–∫–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ —Å –ø—Ä–æ–¥–∞–∫—à–Ω-—Ç–æ–∫–µ–Ω–æ–º!
- –ë–æ—Ç –Ω–∞ Railway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–æ–∫–µ–Ω
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π DEV-—Ç–æ–∫–µ–Ω –æ—Ç @BotFather
- –ò–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ–ø–ª–æ–π –Ω–∞ Railway –ø–µ—Ä–µ–¥ –ª–æ–∫–∞–ª—å–Ω—ã–º –∑–∞–ø—É—Å–∫–æ–º

---

## üìÖ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 2025-11-13 ‚Äî UX/UI –†–µ–¥–∏–∑–∞–π–Ω ‚ú®
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `emoji` –∏ `photo_url` –≤ —Ç–∞–±–ª–∏—Ü—É restaurants
- ‚úÖ **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ emoji:** –ö–∞–∂–¥—ã–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç —Å–≤–æ–π emoji (ü•òüçîüçùüç£)
- ‚úÖ **–£–ª—É—á—à–µ–Ω—ã —Ç–µ–∫—Å—Ç—ã:** –ë–æ–ª–µ–µ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–µ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ **–ù–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫ –∫–Ω–æ–ø–æ–∫:** –õ–æ–≥–∏—á–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ (–£—á–∞—Å—Ç–Ω–∏–∫–∏‚Üí–†–µ–∑—É–ª—å—Ç–∞—Ç—ã‚Üí–ú–µ–Ω—é)
- ‚úÖ **Admin –ø–∞–Ω–µ–ª—å:** –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å emoji –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
- ‚úÖ **–°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `database.py` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è emoji –∏ photo_url
- `handlers.py` ‚Äî —É–ª—É—á—à–µ–Ω—ã —Ç–µ–∫—Å—Ç—ã, emoji –∏–∑ –ë–î, –Ω–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫ –∫–Ω–æ–ø–æ–∫
- `admin_handlers.py` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω —à–∞–≥ –≤—ã–±–æ—Ä–∞ emoji
- `main.py` ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω ConversationHandler
- `migrate_emoji.py` ‚Äî –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

### 2025-11-13 ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AI-workflow
- ‚úÖ –°–æ–∑–¥–∞–Ω `cursor_context.md` ‚Äî –ø–∞–º—è—Ç—å –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω `project_workflow.md` ‚Äî —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ 10 –ø—Ä–∞–≤–∏–ª –≤ `.cursor/rules/` –¥–ª—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞ ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Railway
- üìù –°–∏—Å—Ç–µ–º–∞ AI-—Ç–∏–º–ª–∏–¥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞

### –î–æ 2025-11-13 ‚Äî –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–æ—Ç–∞
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–æ—Ç–∞ (~1,675 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î (6 —Ç–∞–±–ª–∏—Ü)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –†–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ Railway
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## üéØ –¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞

**–°—Ç–∞—Ç—É—Å:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ‚úÖ

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ:
- ü§ñ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∞–≤–∏–ª–∞–º –ø—Ä–æ–µ–∫—Ç–∞
- üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞
- üöÄ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Railway
- üìã Workflow —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ—Ç–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ —á–µ—Ä–µ–∑ AI
- AI –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

---

## üí° –ò–¥–µ–∏ –¥–ª—è –±—É–¥—É—â–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ë–∞–∑–æ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è)
- [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤/–º–µ–Ω—é
- [ ] –ò—Å—Ç–æ—Ä–∏—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [ ] –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ timezone –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)
- [ ] –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –±–ª—é–¥ –≤ –º–µ–Ω—é
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Ä—Ç–∞–º–∏ (–ø–æ–∫–∞–∑ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è)
- [ ] –°–∏—Å—Ç–µ–º–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
- [ ] –†–µ–π—Ç–∏–Ω–≥ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)
- [ ] –ì—Ä—É–ø–ø–æ–≤–æ–π –∑–∞–∫–∞–∑ —Å —Ä–∞—Å—á—ë—Ç–æ–º —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- [ ] –ê–ª–ª–µ—Ä–≥–µ–Ω—ã –∏ –¥–∏–µ—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
- [ ] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã –æ–±–µ–¥–æ–≤
- [ ] –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–∏–∫–æ–≤

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 13 –Ω–æ—è–±—Ä—è 2025
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 13 –Ω–æ—è–±—Ä—è 2025, 09:45
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–æ–¥–∞–∫—à–Ω (Railway)
**–í–µ—Ä—Å–∏—è:** 1.0

